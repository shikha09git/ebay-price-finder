{% extends 'base.html' %}

{% block title %}Listed Products - eBay Price Finder{% endblock %}

{% block extra_css %}
<style>
    .products-hero {
        background: linear-gradient(135deg, rgba(0, 100, 210, 0.12), rgba(134, 184, 23, 0.18));
        border-radius: 24px;
        padding: 2.5rem 2.25rem;
        position: relative;
        overflow: hidden;
        box-shadow: 0 20px 40px rgba(15, 34, 60, 0.08);
    }
    .products-hero::after {
        content: "";
        position: absolute;
        inset: -30% 45% auto -10%;
        height: 220px;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.65), rgba(255, 255, 255, 0));
        pointer-events: none;
    }
    .products-hero p {
        max-width: 460px;
    }
    .hero-chip {
        display: inline-flex;
        align-items: center;
        gap: 0.4rem;
        padding: 0.3rem 0.75rem;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.7);
        color: #0b1b2b;
        font-weight: 600;
        font-size: 0.85rem;
        box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.06);
    }
    .hero-actions .btn {
        border-radius: 999px;
        padding: 0.65rem 1.4rem;
        box-shadow: 0 10px 20px rgba(0, 100, 210, 0.25);
    }
    .product-grid-card {
        border-radius: 18px;
        overflow: hidden;
        transition: transform 0.25s ease, box-shadow 0.25s ease;
    }
    .product-grid-card:hover {
        transform: translateY(-6px);
        box-shadow: 0 18px 30px rgba(12, 24, 46, 0.18);
    }
    .product-cover {
        height: 190px;
        background: linear-gradient(135deg, rgba(0, 100, 210, 0.12), rgba(134, 184, 23, 0.18));
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .price-pill {
        display: inline-flex;
        align-items: center;
        gap: 0.25rem;
        padding: 0.35rem 0.75rem;
        border-radius: 999px;
        background: rgba(0, 100, 210, 0.12);
        color: #0b1b2b;
        font-weight: 700;
    }
    .empty-state {
        padding: 3rem;
        border-radius: 20px;
        background: rgba(255, 255, 255, 0.9);
        box-shadow: 0 20px 40px rgba(15, 34, 60, 0.08);
    }
</style>
{% endblock %}

{% block content %}
<section class="products-hero mb-5">
    <div class="d-flex flex-wrap align-items-center justify-content-between gap-4">
        <div>
            <div class="hero-chip mb-3"><i class="bi bi-stars"></i> Curated inventory</div>
            <h2 class="mb-2"><i class="bi bi-card-list"></i> Listed Products</h2>
            <p class="text-muted mb-0">Showcase every product you have listed, with quick access to price and stock details.</p>
        </div>
        <div class="hero-actions d-flex align-items-center gap-3">
            <div class="text-end">
                <div class="text-uppercase small text-muted">Listings</div>
                <div class="h4 mb-0">{{ products|length }}</div>
            </div>
            <a class="btn btn-primary" href="{% url 'finder:add_product' %}">
                <i class="bi bi-plus-circle"></i> Add Product
            </a>
        </div>
    </div>
</section>

{% if products %}
<div class="row g-4">
    {% for product in products %}
    <div class="col-md-6 col-lg-4">
        <a class="text-decoration-none" href="{% url 'finder:product_detail' pk=product.pk %}">
            <div class="card h-100 product-grid-card">
                {% if product.image %}
                    <img src="{{ product.image.url }}" class="card-img-top" alt="{{ product.title }}" style="height: 190px; object-fit: cover;">
                {% else %}
                    <div class="product-cover">
                        <i class="bi bi-image" style="font-size: 2rem; color: rgba(11, 27, 43, 0.4);"></i>
                    </div>
                {% endif %}
                <div class="card-body">
                    <h5 class="card-title text-dark">{{ product.title }}</h5>
                    <p class="text-muted small mb-2">Category {{ product.category_id }} Â· {{ product.get_condition_display }}</p>
                    <div class="d-flex align-items-center justify-content-between">
                        <span class="price-pill">${{ product.price }}</span>
                        <span class="text-muted small">Qty {{ product.quantity }}</span>
                    </div>
                </div>
            </div>
        </a>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state text-center">
    <div class="display-6 mb-2"><i class="bi bi-box"></i></div>
    <h4 class="mb-2">No products listed yet</h4>
    <p class="text-muted mb-3">Start building your catalog by adding your first product.</p>
    <a class="btn btn-primary" href="{% url 'finder:add_product' %}">
        <i class="bi bi-plus-circle"></i> Add Your First Product
    </a>
</div>
{% endif %}
{% endblock %}
